<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í•œ ë²ˆì— ë³´ëŠ” ì‹œì¥ ì§€í‘œ ëŒ€ì‹œë³´ë“œ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark">
  <style>
    :root { color-scheme: light dark; }
    .card { background: color-mix(in lab, white 80%, transparent); overflow: hidden; }
    @media (prefers-color-scheme: dark) {
      .card { background: color-mix(in lab, black 80%, transparent); }
    }
    .card { border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,.08); padding: 1rem; }
    .section-title { font-size: 1.125rem; font-weight: 600; margin-bottom: .5rem; }
    .tv-wrap { position: relative; width: 100%; min-height: 420px; }
    .tv-wrap.small { min-height: 110px; }
    .tv-wrap > * { position: absolute; inset: 0; width: 100%; height: 100%; }
    .fred-wrap { position: relative; width: 100%; min-height: 360px; }
    .fred-wrap > iframe, .fred-wrap > img { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; object-fit: cover; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-zinc-50 to-zinc-100 dark:from-black dark:to-zinc-950 text-zinc-900 dark:text-zinc-100">
  <header class="sticky top-0 z-50 bg-white/70 dark:bg-zinc-900/70 backdrop-blur border-b border-zinc-200/60 dark:border-zinc-800/60">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <div class="text-xl font-bold">ğŸ“Š ì‹œì¥ ì§€í‘œ ëŒ€ì‹œë³´ë“œ</div>
      <div class="ml-auto flex items-center gap-2 text-sm">
        <button id="themeToggle" class="px-3 py-1 rounded-xl border border-zinc-300 dark:border-zinc-700">ë¼ì´íŠ¸/ë‹¤í¬</button>
        <a href="#howto" class="underline opacity-80">ì„¤ì •</a>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-4 space-y-4">
    <!-- Quick tape (compact: 3 items only) -->
    <section class="card">
      <div class="section-title">ì£¼ìš” ì§€ìˆ˜/í™˜ìœ¨ ë¹ ë¥¸ ë³´ê¸°</div>
      <div class="tv-wrap small">
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
          {
            "symbols": [
              {"proName": "FOREXCOM:SPXUSD", "title": "S&P 500"},
              {"proName": "NASDAQ:NDX", "title": "NASDAQ 100"},
              {"proName": "FX_IDC:USDKRW", "title": "USD/KRW"}
            ],
            "showSymbolLogo": true,
            "colorTheme": "dark",
            "isTransparent": true,
            "displayMode": "adaptive",
            "locale": "kr"
          }
          </script>
        </div>
      </div>
    </section>

    <!-- ================= [1] ê±°ì‹œê²½ì œ íë¦„ ================= -->
    <section class="card">
      <div class="section-title">[1] ê±°ì‹œê²½ì œ íë¦„</div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- 10Y - 3M ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨ (2021-07 ì´í›„) -->
        <div class="card">
          <div class="section-title">ë¯¸êµ­ 10ë…„ â€“ 3ê°œì›” ê¸ˆë¦¬ì°¨ (T10Y3M)</div>
          <img alt="T10Y3M" class="w-full rounded-xl" src="https://fred.stlouisfed.org/graph/fredgraph.png?id=T10Y3M&cosd=2021-07-01&show_legend=0&width=670&height=400">
          <p class="text-xs opacity-90 mt-2">
            ì¶œì²˜: FRED â€“ 10-Year Treasury Constant Maturity Minus 3-Month Treasury Constant Maturity
            (<a class="underline" target="_blank" rel="noopener" href="https://fred.stlouisfed.org/series/T10Y3M">https://fred.stlouisfed.org/series/T10Y3M</a>)
          </p>
        </div>

        <!-- í•˜ì´ì¼ë“œ ê°€ê²© ì§€ìˆ˜ -> HYG í”„ë¡ì‹œ (overflow fix) -->
        <div class="card">
          <div class="section-title">í•˜ì´ì¼ë“œ ì±„ê¶Œ â€˜ê°€ê²©â€™ ì§€ìˆ˜ (Proxy: HYG)</div>
          <div class="tv-wrap small">
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
              {
                "symbols": [["AMEX:HYG|1D"]],
                "interval": "D",
                "isTransparent": true,
                "autosize": true,
                "colorTheme": "dark",
                "locale": "kr"
              }
              </script>
            </div>
          </div>
          <p class="text-xs opacity-70 mt-2">ICE/BofA HY â€˜ê°€ê²©â€™ ì§€ìˆ˜ì˜ ì˜¤í”ˆ ì„ë² ë“œ ëŒ€ì•ˆìœ¼ë¡œ HYG ETFë¥¼ ì‚¬ìš©.</p>
        </div>

        <!-- M2 Velocity -->
        <div class="card md:col-span-2">
          <div class="section-title">M2 í†µí™”ìœ í†µì†ë„ (M2V)</div>
          <img alt="M2V" class="w-full rounded-xl" src="https://fred.stlouisfed.org/graph/fredgraph.png?id=M2V&cosd=1990-01-01&show_legend=0&width=1200&height=400">
          <p class="text-xs opacity-70 mt-2">ì¶œì²˜: FRED (ë¬´API PNG ì„ë² ë“œ)</p>
        </div>
      </div>
    </section>

    <!-- ================= [2] ìœ ë™ì„±/ë¶„ìœ„ê¸° íŒŒì•… ================= -->
    <section class="card">
      <div class="section-title">[2] ì‹œì¥ ìœ ë™ì„± Â· ë¶„ìœ„ê¸°</div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- NAAIM Exposure Index -->
        <div class="card">
          <div class="section-title">NAAIM ì£¼ì‹ ë¹„ì¤‘ ì§€ìˆ˜</div>
          <p class="text-sm opacity-90">ì„ë² ë“œ ì œí•œìœ¼ë¡œ ì§ì ‘ ë¶ˆëŸ¬ì˜¤ê¸°ê°€ ì–´ë ¤ì›€. ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ì›ë³¸ì„ ì—´ê±°ë‚˜, CSV ë¶™ì—¬ë„£ê¸°ë¡œ ì°¨íŠ¸ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŒ.</p>
          <div class="flex gap-2 mt-2">
            <a class="px-3 py-2 rounded-xl border border-zinc-300 dark:border-zinc-700" target="_blank" rel="noopener" href="https://www.naaim.org/programs/naaim-exposure-index/">ê³µì‹ í˜ì´ì§€</a>
            <button id="naaimLoad" class="px-3 py-2 rounded-xl border border-zinc-300 dark:border-zinc-700">ë‚´ CSV ë¶™ì—¬ë„£ê¸°</button>
          </div>
          <canvas id="naaimChart" class="w-full h-56 mt-3 hidden"></canvas>
        </div>

        <!-- í•œêµ­/ê¸€ë¡œë²Œ ë¦¬ì„œì¹˜ & ì‹œí™© ë§í¬ ëª¨ìŒ -->
        <div class="card">
          <div class="section-title">ë¦¬ì„œì¹˜ & ì‹œí™© ë°”ë¡œê°€ê¸°</div>
          <ul class="list-disc pl-5 space-y-2 text-sm">
            <li><a class="underline" target="_blank" rel="noopener" href="https://consensus.hankyung.com/apps.analysis/index">í•œê²½ ì»¨ì„¼ì„œìŠ¤</a></li>
            <li><a class="underline" target="_blank" rel="noopener" href="https://finance.naver.com/">ë„¤ì´ë²„ ì¦ê¶Œ</a></li>
            <li><a class="underline" target="_blank" rel="noopener" href="https://www1.kiwoom.com/h/invest/research/VAnalUDView?dummyVal=0">í‚¤ì›€ì¦ê¶Œ ë¯¸êµ­ ì‹œí™©</a></li>
            <li><a class="underline" target="_blank" rel="noopener" href="https://www1.kiwoom.com/h/invest/research/VAnalCCView?dummyVal=0">í‚¤ì›€ì¦ê¶Œ ë¯¸êµ­/ì„ ì§„êµ­ ë¦¬ì„œì¹˜</a></li>
          </ul>
        </div>

        <!-- CNN Fear & Greed -->
        <div class="card md:col-span-2">
          <div class="section-title">ê³µí¬/íƒìš• ì§€ìˆ˜</div>
          <p class="text-sm opacity-90">CNN í˜ì´ì§€ ë³´ì•ˆì •ì±…ìœ¼ë¡œ ì„ë² ë“œ ë¶ˆê°€. ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ìƒˆ íƒ­ì—ì„œ í™•ì¸.</p>
          <a class="mt-2 inline-block px-3 py-2 rounded-xl border border-zinc-300 dark:border-zinc-700" target="_blank" rel="noopener" href="https://www.cnn.com/markets/fear-and-greed">CNN Fear & Greed ì—´ê¸°</a>
        </div>
      </div>
    </section>

    <!-- ê²½ì œ ìº˜ë¦°ë” -->
    <section class="card">
      <div class="section-title">ì´ë²ˆ ì£¼ ê²½ì œì§€í‘œ ìº˜ë¦°ë”</div>
      <div class="tv-wrap">
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
          {
            "colorTheme": "dark",
            "isTransparent": true,
            "width": "100%",
            "height": "100%",
            "locale": "kr",
            "importanceFilter": "-1,0,1",
            "countryFilter": "us,kr,cn,jp,eu"
          }
          </script>
        </div>
      </div>
    </section>

    <footer class="py-6 text-center text-xs opacity-70">Â© ë‹¹ì‹ ì˜ ê°œì¸ íˆ¬ì ëŒ€ì‹œë³´ë“œ. ìë£Œ: TradingView, FRED</footer>
  </main>

  <script>
    // Light/Dark quick toggle
    const btn = document.getElementById('themeToggle');
    const root = document.documentElement;
    const setTheme = (mode) => { if (mode === 'dark') root.classList.add('dark'); else root.classList.remove('dark'); localStorage.setItem('theme', mode); };
    const saved = localStorage.getItem('theme');
    if (saved) setTheme(saved); else setTheme(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    btn.addEventListener('click', () => setTheme(root.classList.contains('dark') ? 'light' : 'dark'));
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Theme toggle
    const btn = document.getElementById('themeToggle');
    const root = document.documentElement;
    const setTheme = (mode) => { if (mode === 'dark') root.classList.add('dark'); else root.classList.remove('dark'); localStorage.setItem('theme', mode); };
    const saved = localStorage.getItem('theme');
    if (saved) setTheme(saved); else setTheme(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    if (btn) btn.addEventListener('click', () => setTheme(root.classList.contains('dark') ? 'light' : 'dark'));

    // NAAIM CSV â†’ chart
    const naaimBtn = document.getElementById('naaimLoad');
    if (naaimBtn) naaimBtn.addEventListener('click', async () => {
      const csv = prompt('CSV ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš” (ì²« ì—´: ë‚ ì§œ, ë‘˜ì§¸ ì—´: ê°’).');
      if (!csv) return;
      const lines = csv.split(/?
/).filter(Boolean);
      const labels = []; const values = [];
      for (const line of lines) {
        const [d, v] = line.split(',');
        if (!d || !v) continue;
        labels.push(d.trim()); values.push(parseFloat(v));
      }
      const canvas = document.getElementById('naaimChart');
      canvas.classList.remove('hidden');
      new Chart(canvas.getContext('2d'), { type: 'line', data: { labels, datasets: [{ label: 'NAAIM Exposure', data: values, fill: true, tension: 0.2 }] }, options: { responsive: true, maintainAspectRatio: false } });
    });
  </script>
</body>
</html>
